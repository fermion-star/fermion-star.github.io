<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="styles.css">
    <script src="https://kit.fontawesome.com/91a30ee6d3.js" crossorigin="anonymous"></script>
</head>
<body>
    <div id="titleContainer">
        <input type="text" id="title" placeholder="Enter design title here">
    </div>
    <div class="content">
        <div class="tool-buttons">
            <button id="draw"><i class="fas fa-pencil-alt"></i></button>
            <button id="select"><i class="fas fa-mouse-pointer"></i></button>
            <button id="clear"><i class="fas fa-broom"></i></button>
            <button id="export"><i class="fas fa-file-export"></i></button>
            <!-- <button id="check"><i class="fa-regular fa-square-check"></i></button> -->
        </div>
        <canvas id="canvas" width="500" height="500"></canvas>
    </div>
    <div id="status-bar">Status: Idle</div>

    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script> -->
    <script src="fabric.js"></script>
    <script src="script.js"></script>
    <script src="BEMsolver/BEMsolver.js"></script>

    <script>
        Module.onRuntimeInitialized = async function() {
            WASM_isReady = true;
            // // const N = 3;
            // // let flatA = [1, 2, 3, 4, 5, 6, 7, 8, 9];  // Flattened 3x3 matrix
            // // let flatb = [1, 2, 3];  // Vector
            // // flatA = [-0.9975,     0.1272,    -0.6134,     0.6175,     0.1700,    -0.0403,    -0.2994,     0.7919,     0.6457];
            // // flatb = [ 0.4932,    -0.6518,     0.7179];

            // let N=20;
            // let flatA = [
            //     0.269648641716598,0.494287055379411,-1.4831210225159,-1.02026438568297,-0.446995010744528,0.109658591327603,1.12873645202828,-0.289963040800028,1.26155071814115,0.475424811707271,1.17411675149371,0.126947068043646,-0.656815928948082,-1.48139907157878,0.155488995903894,0.818551368521001,-0.292588130834394,-0.540786416488526,-0.308641815280113,-1.09659330152547,-0.493009815316451,-0.180739356415037,0.045841105713705,-0.0637831200223326,0.611335194065236,0.10931769377487,1.81401545028038,0.312023828329274,1.80449377172419,-0.723121479570418,0.526547037749559,-0.260250861706117,0.60014250880863,0.593930795648753,-2.18602161274824,-1.32704314952029,-1.44101359763891,0.401844497039815,1.47020128084852,-0.326814228785906,0.812323004640796,0.545540103526116,-1.05163230952085,0.397466995795309,-0.751894738681892,1.51626689664595,-0.0325665091944807,1.63599965727829,-0.425058490610031,0.589433366718221,-0.062791225718325,-2.02195893005179,-0.982131525779048,0.612511298166949,-0.0548861299886774,-1.11873200245272,-0.626378538867139,0.249517740562795,-0.993019006549601,0.974950224811312,-0.640709506726058,1.80886262051925,-1.07986625073883,0.199189444075264,-1.52102656176895,-0.723631125289073,-0.593250315010804,0.401336339818801,0.942133319236942,0.30048596759573,-0.373070658631004,0.815488508092498,0.798886992156716,0.120205281956355,0.571247629714476,0.412796010311392,-0.986961883351522,0.759568325914783,-0.65720129909835,-0.603918481376169,0.176946822329411,-0.307503469862751,-0.131820352915894,0.595357673884102,1.04683278430523,-0.197958632611842,0.327678163907201,-0.238301504589733,0.229596893220314,0.439997904822629,-0.616865928889227,0.274836786911666,0.601102032468295,0.0923079512389623,1.72984139157236,-0.608557444738319,-0.737059771697805,-1.74987930638763,0.910482579647112,0.867082552947325,-0.0798928390580371,0.898475989377142,0.183703423091249,0.290790134884454,0.112944717021051,0.43995218887244,0.101662443700341,2.78733522781344,-1.16666503019464,-1.85429908268969,-1.14068114466963,-1.0933434562396,-0.433609296474824,-0.168469878275448,-0.218533560026581,0.541334435719376,0.389266203843264,0.751228984688333,1.778255899291,1.22306255173381,-1.28325610460477,-2.32895451628334,0.901931466951714,-1.83563868373519,0.0667569114368658,0.035479485837577,2.22716807816787,-0.0692142540220484,-0.507323064614498,0.235809672576244,0.245804851893843,0.0700452094168079,-0.608580510079949,-1.22259338018663,0.316500360797716,-1.34286923662193,-1.03218434407217,1.33121588506497,-0.418903195029849,-0.140321722056366,0.899822328897223,-0.300111005615676,1.0293657121031,-0.345065971567321,1.01280186426298,0.629334584931419,-0.213015082641055,-0.865697308360524,-1.04310830133763,-0.270068812648099,-0.438141355602144,-0.408674314796326,0.983545235205556,-0.297697144009373,1.14367891077096,-0.531620117507069,0.972565728008653,-0.522250484993549,0.176577794642316,0.970737823554689,-0.41397227497423,-0.438270518204902,2.00339061086226,0.950993499549085,-0.43200384372778,0.648940737363587,-0.360076301153972,0.705885019349416,1.41584906843659,-1.60451566859706,1.02885306900203,1.45796778066199,0.0474713232748285,1.74625671011842,0.155387514201181,-1.23711968466263,-2.19349427883461,-0.333407067263733,0.713543302564059,0.317407733234497,0.41361039029313,-0.57708558363794,0.144001801404465,-1.63866572993389,-0.760089998635267,-0.818793096250257,0.519728888133619,-0.0141600590972047,-1.15552936828724,-0.00952491609816556,-0.68981053763171,-0.666699153601164,0.864149421165126,0.113419436226868,0.398362846165994,0.883969890234671,0.180257693987047,0.55085452205747,0.682964276111937,1.1706086600356,0.475860587278343,1.4122326864445,0.0226084843095981,-0.0478694102202059,1.70133465427496,-0.509711712767427,-0.00285496014432121,0.919867079806395,0.149808732632761,1.40493344567698,1.03412153956971,0.291570288770806,-0.777698538311603,0.566696097539305,-1.38262115948035,0.244474675589888,0.808438803167691,0.213041698417,0.879677164233489,2.03887625141404,0.923932448688937,0.266917446595828,0.641661506421779,0.425485355625296,-1.31472350348688,-0.416411219699434,1.22468782478534,-0.0435842055463326,0.582423277447969,-1.00650007461934,0.0645167423111044,0.600291949185784,-1.36151495486457,0.347592631960065,-0.181843218459334,-0.939534765941492,-0.0375331888191716,-1.89630449362245,-2.12797676818267,-1.17692333071496,-0.990532220484176,-1.17303232726741,-1.72542778952869,0.288228089665011,-1.59418372026681,0.110218849223381,0.78706667635798,-0.00222678631383613,0.0931087600588035,-0.378157056589758,-1.482676111059,-0.0438185853582948,0.960825211682115,1.73824493261334,-0.4302062424261,-1.62732273646978,0.166347492460066,0.376265910450719,-0.226950464706233,-1.14891228961879,2.02433259954387,-2.35952351095849,-0.509972045799939,-1.3216255908101,-0.636128249660041,0.317851419059697,0.138047974449526,-0.710735074811226,0.777003526719788,0.622393924172013,0.647380884516047,-0.425631681660351,1.04858076053644,0.660707086367175,2.50877247318511,1.06345963904102,1.15692165332739,0.0529788273256128,-1.28838600294029,-0.371221247497632,-0.757791916498819,-0.563968917027427,0.555138560001846,-0.556778063950366,-0.895113135482436,-0.40932772163407,-0.160886766738443,0.409334430455455,-0.952635997119977,0.317317472324612,0.0780200809780775,1.32438544916022,-0.213170486421586,-0.134478644555426,-1.1713558179203,-1.38526268319524,0.310508318600499,-0.249489064473939,0.503744055737328,-0.892661403477038,1.90851233035822,0.122230700504887,1.04703326689793,-0.226920199323937,-0.162501941548495,0.690051897857806,0.555756771412105,-1.12025500148841,-1.53269301392951,-1.09786776954067,-1.41577332156794,0.0595705885660458,-0.41125092553222,-0.368010733040955,-1.36096312939369,0.779567428734972,0.439411111553712,-0.0896224837412097,1.02118011801418,-0.873979465028903,0.414700293047627,0.348441199952281,0.349254416663714,-0.729247267629503,0.326840248762991,-0.514881632926476,-0.896446150502486,-1.20326818641502,1.03781563948524,-0.845944212336118,-0.172913844259168,-1.2086520547402,-0.297126799995404,-3.23203779594001,-1.08695922946133,-1.42643615947972,-1.01445076770532,-0.213267188307358,-0.325347780360491,1.94439779196628,-0.571773218349456,-0.250032278035044,-1.5693154703407,-0.477382663694067,-1.33797665356226,0.0302990237881831,0.853086767518578,0.40425346510936,-0.700620213418205,-1.63054289274725,1.46001318514265,2.05004273293787,0.120500599699389,-0.989901604221187,1.19777147431488,-0.592656218169254,-0.469809363224454,0.886377377072694,-1.38521980111084,-1.95675395423192,0.42068370020125,0.400737998146962,0.0951421578641687,0.49668439163653,1.0822405961607,0.970447788354572,-0.568569570389605,0.809972073318538,0.173247371832088,-0.505542568515379,-1.1933057908902,0.64697093888115,-0.353622599299341,0.046434526687823,-0.792947502201808,-1.55051447477956,0.171586355268628,-0.0621391248043618,1.19902787729197,0.801704070327277,1.05330457914955,-0.748876752543159,-0.93632649711602,-1.26908677286849,0.497980623046732,2.78908112764392,0.727572036915723,-0.773064102152237,0.836633754476153,-1.1283303100836,-1.42447009141638,0.717442315507358,-0.777905520185398,0.315985880708604,1.40653513807679,0.401124635731864,0.929660284419656,-1.60580220462075,0.661536244123409,2.13850225382851
            // ];
            // let flatb = [
            //     0.866930291751916,0.0862345298634963,0.366436616319199,0.369198804330018,0.685028472661609,0.597941635383889,0.789363943641905,0.367652918437877,0.206027859505195,0.0866665473955323,0.771933917099107,0.20567452146476,0.388271631047802,0.551778531957227,0.2289532520231,0.641940620399187,0.48448037239818,0.151845525116267,0.781931966588002,0.100606322362422
            // ];
            // let flatx0 = [
            //     -0.705279019310985,0.532829187153805,0.0562926531342891,0.79189828928765,0.616167392148976,0.818836138409242,0.22967407299641,0.275540611357449,-0.102604680327028,-1.71430693139956,0.931691196514398,-0.308639445880038,0.0423154121895962,0.796247558445858,0.719482731840742,0.82987706248302,0.218454628740856,0.0622549181137963,-1.74264199710741,0.344205030788632
            // ];

            // let vecA = new Module.VectorDouble();
            // flatA.forEach(val => vecA.push_back(val));
            // let vecb = new Module.VectorDouble();
            // flatb.forEach(val => vecb.push_back(val));
            // let vecx0 = new Module.VectorDouble();
            // flatx0.forEach(val => vecx0.push_back(val));

            // Module.setMatrixA(vecA, N);
            // Module.setVectorb(vecb, N);
            // Module.setVectorx0(vecx0, N);
            // Module.solveLinearSystem();

            // let solution = Module.getSolution();
            // let error = Module.getError();

            // let vecx = [];
            // for (var i = 0; i < solution.size(); i++) {
            //     vecx.push(solution.get(i));
            // }

            // console.log("Solution x:", vecx);
            // console.log("Error x vs x0:", error);
            // // Error x vs x0: 2.252454181028307e-14
            // vecA.delete();
            // vecb.delete();
            // vecx0.delete();
        };
    </script>
</body>
</html>
